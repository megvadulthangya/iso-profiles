#!/bin/bash

# Nyelv √©rz√©kel√©se a rendszer nyelvi be√°ll√≠t√°sa alapj√°n
detect_language() {
    if [[ $LANG == *"hu"* ]] || [[ $LANGUAGE == *"hu"* ]]; then
        echo "hu"
    else
        echo "en"
    fi
}

# R√©szletes magyar√°zat a telep√≠t√©si folyamatr√≥l
show_detailed_explanation() {
    local lang=$(detect_language)

    if [ "$lang" = "hu" ]; then
        echo ""
        echo "üìã R√âSZLETES TELEP√çT√âSI FOLYAMAT:"
        echo "=========================================="
        echo ""
        echo "1. üóÇÔ∏è  SNAPPER BE√ÅLL√çT√ÅS (BTRFS SNAPSHOTOK)"
        echo "   ‚Ä¢ Automatikus rendszerpillanatk√©pek be√°ll√≠t√°sa"
        echo "   ‚Ä¢ T√©rkorl√°t: 0.5% (f√©l sz√°zal√©k)"
        echo "   ‚Ä¢ Heti/havi/√©ves snapshot takar√≠t√°s"
        echo "   ‚Ä¢ Teszt snapshot k√©sz√≠t√©se"
        echo ""
        echo "2. üõ†Ô∏è  BTRFS KARBANTART√ÅS ID≈êZ√çT≈êK"
        echo "   ‚Ä¢ Heti BTRFS scrub (adatintegrit√°s ellen≈ërz√©s)"
        echo "   ‚Ä¢ Havi BTRFS balance (adatkiegyenl√≠t√©s)"
        echo "   ‚Ä¢ Heti TRIM (szabad ter√ºlet optimaliz√°l√°s)"
        echo "   ‚Ä¢ Garuda Linux-st√≠lus√∫ karbantart√°s"
        echo ""
        echo "3. üì¶ CSOMAGOK TELEP√çT√âSE (100+ CSOMAG)"
        echo "   ‚Ä¢ Alap rendszereszk√∂z√∂k: dmenu, rofi, flameshot, picom"
        echo "   ‚Ä¢ Fejleszt≈ëeszk√∂z√∂k: geany, git, fzf, bat, eza"
        echo "   ‚Ä¢ Hang/mediakezel√©s: mpd, mpc, playerctl, alsa-utils"
        echo "   ‚Ä¢ H√°l√≥zat: network-manager-applet, wavemon"
        echo "   ‚Ä¢ AUR csomagok: awesome-git, nordic t√©m√°k, grayjay-bin"
        echo ""
        echo "4. üé® NORDIC T√âMA TELJES K√ñR≈∞ BE√ÅLL√çT√ÅSA"
        echo "   ‚Ä¢ GTK t√©ma: Nordic-standard-buttons"
        echo "   ‚Ä¢ Ikon t√©ma: Nordzy-dark"
        echo "   ‚Ä¢ Kurzor t√©ma: Nordic-cursors"
        echo "   ‚Ä¢ Bet≈±t√≠pus: FiraCode Nerd Font"
        echo "   ‚Ä¢ Kvantum t√©m√°k rendszerszint≈± telep√≠t√©se"
        echo "   ‚Ä¢ Rofi t√©m√°k (Adi1090x st√≠lus)"
        echo "   ‚Ä¢ LightDM be√°ll√≠t√°s nordic h√°tt√©rrel"
        echo ""
        echo "5. ‚öôÔ∏è  RENDSZERBE√ÅLL√çT√ÅSOK"
        echo "   ‚Ä¢ Nano alap√©rtelmezett szerkeszt≈ëv√© t√©tele"
        echo "   ‚Ä¢ Nano szintaxis kiemel√©s enged√©lyez√©se"
        echo "   ‚Ä¢ Fish shell be√°ll√≠t√°sa (root sz√°m√°ra)"
        echo "   ‚Ä¢ Automatikus lock (vide√≥lej√°tsz√°s k√∂zben nem aktiv√°l√≥dik)"
        echo "   ‚Ä¢ XFCE be√°ll√≠t√°sok optimaliz√°l√°sa"
        echo "   ‚Ä¢ Minden felhaszn√°l√≥ sz√°m√°ra konfigur√°l√°s (/etc/skel)"
        echo ""
        echo "6. üé™ AWESOMEWM KONFIGUR√ÅCI√ì"
        echo "   ‚Ä¢ AwesomeWM Copycats konfigur√°ci√≥ telep√≠t√©se"
        echo "   ‚Ä¢ Automatikus symlinkek l√©trehoz√°sa"
        echo "   ‚Ä¢ Nordikus h√°tt√©rk√©pek telep√≠t√©se"
        echo "   ‚Ä¢ Mission Impossibru szkriptek aktiv√°l√°sa"
        echo ""
        echo "7. üßπ TAKAR√çT√ÅS √âS √ñNMEGSEMMIS√çT√âS"
        echo "   ‚Ä¢ R√©gi telep√≠t√©si f√°jlok elt√°vol√≠t√°sa"
        echo "   ‚Ä¢ √Åtmeneti f√°jlok t√∂rl√©se"
        echo "   ‚Ä¢ Telep√≠t≈ë szkript √∂nmegsemmis√≠t√©se"
        echo ""
        echo "‚è∞ BECS√úLT ID≈ê: 15-60 perc (processzor √©s internet sebess√©gt≈ël f√ºgg)"
        echo ""
    else
        echo ""
        echo "üìã DETAILED INSTALLATION PROCESS:"
        echo "=========================================="
        echo ""
        echo "1. üóÇÔ∏è  SNAPPER SETUP (BTRFS SNAPSHOTS)"
        echo "   ‚Ä¢ Automatic system snapshot configuration"
        echo "   ‚Ä¢ Space limit: 0.5% (half percent)"
        echo "   ‚Ä¢ Weekly/monthly/yearly snapshot cleanup"
        echo "   ‚Ä¢ Test snapshot creation"
        echo ""
        echo "2. üõ†Ô∏è  BTRFS MAINTENANCE TIMERS"
        echo "   ‚Ä¢ Weekly BTRFS scrub (data integrity check)"
        echo "   ‚Ä¢ Monthly BTRFS balance (data rebalancing)"
        echo "   ‚Ä¢ Weekly TRIM (free space optimization)"
        echo "   ‚Ä¢ Garuda Linux-style maintenance"
        echo ""
        echo "3. üì¶ PACKAGE INSTALLATION (100+ PACKAGES)"
        echo "   ‚Ä¢ System tools: dmenu, rofi, flameshot, picom"
        echo "   ‚Ä¢ Developer tools: geany, git, fzf, bat, eza"
        echo "   ‚Ä¢ Audio/media: mpd, mpc, playerctl, alsa-utils"
        echo "   ‚Ä¢ Network: network-manager-applet, wavemon"
        echo "   ‚Ä¢ AUR packages: awesome-git, nordic themes, grayjay-bin"
        echo ""
        echo "4. üé® COMPLETE NORDIC THEME SETUP"
        echo "   ‚Ä¢ GTK theme: Nordic-standard-buttons"
        echo "   ‚Ä¢ Icon theme: Nordzy-dark"
        echo "   ‚Ä¢ Cursor theme: Nordic-cursors"
        echo "   ‚Ä¢ Font: FiraCode Nerd Font"
        echo "   ‚Ä¢ System-wide Kvantum themes"
        echo "   ‚Ä¢ Rofi themes (Adi1090x style)"
        echo "   ‚Ä¢ LightDM setup with nordic background"
        echo ""
        echo "5. ‚öôÔ∏è  SYSTEM CONFIGURATIONS"
        echo "   ‚Ä¢ Set Nano as default editor"
        echo "   ‚Ä¢ Enable Nano syntax highlighting"
        echo "   ‚Ä¢ Configure Fish shell (for root)"
        echo "   ‚Ä¢ Automatic lock (disabled during video playback)"
        echo "   ‚Ä¢ Optimize XFCE settings"
        echo "   ‚Ä¢ Configure for all users (/etc/skel)"
        echo ""
        echo "6. üé™ AWESOMEWM CONFIGURATION"
        echo "   ‚Ä¢ Install AwesomeWM Copycats configuration"
        echo "   ‚Ä¢ Create automatic symlinks"
        echo "   ‚Ä¢ Install Nordic wallpapers"
        echo "   ‚Ä¢ Activate Mission Impossibru scripts"
        echo ""
        echo "7. üßπ CLEANUP AND SELF-DESTRUCT"
        echo "   ‚Ä¢ Remove old installation files"
        echo "   ‚Ä¢ Clean temporary files"
        echo "   ‚Ä¢ Self-destruct installer script"
        echo ""
        echo "‚è∞ ESTIMATED TIME: 15-60 minutes (depends on CPU and internet speed)"
        echo ""
    fi
}

# F≈ë √ºzenet megjelen√≠t√©se
show_message() {
    local lang=$(detect_language)

    if [ "$lang" = "hu" ]; then
        echo "==================================================================="
        echo "                   ‚ö†Ô∏è  RENDSZERBE√ÅLL√çT√ÅSI FIGYELMEZTET√âS ‚ö†Ô∏è"
        echo "==================================================================="
        echo ""
        echo "üö® FONTOS: Ez a szkript kritikus rendszerm√≥dos√≠t√°sokat hajt v√©gre!"
        echo "   K√©rj√ºk, olvassa el figyelmesen az al√°bbi inform√°ci√≥kat:"
        echo ""
        echo "üî¥ EL≈êFELT√âTELEK & FIGYELMEZTET√âSEK:"
        echo ""
        echo "üì∂  STABIL INTERNETKAPCSOLAT SZ√úKS√âGES"
        echo "    ‚Ä¢ Megb√≠zhat√≥ internetkapcsolat sz√ºks√©ges a folyamat sor√°n"
        echo "    ‚Ä¢ Megszak√≠t√°s telep√≠t√©si hib√°kat okozhat"
        echo "    ‚Ä¢ T√∂bb sz√°z MB adatlet√∂lt√©s v√°rhat√≥"
        echo ""
        echo "‚è∞  BECSLT ID≈êIG√âNY: 15 PERCT≈êL 60 PERCIG"
        echo "    ‚Ä¢ A folyamat csomagok ford√≠t√°s√°t √©s rendszerbe√°ll√≠t√°sokat tartalmaz"
        echo "    ‚Ä¢ Az id≈ëtartam a rendszer sebess√©g√©t≈ël √©s internetkapcsolatt√≥l f√ºgg"
        echo "    ‚Ä¢ A folyamat t√∂bb szakaszban fut, r√©szletes le√≠r√°st l√°sd al√°bb"
        echo ""
        echo "‚öôÔ∏è  RENDSZERVERM√ìDOS√çT√ÅSOK T√ñRT√âNNEK:"
        echo "    ‚Ä¢ Snapper (BTRFS snapshot) konfigur√°ci√≥ k√©sz√ºl"
        echo "    ‚Ä¢ BTRFS karbantart√≥ id≈ëz√≠t≈ëk aktiv√°l√≥dnak"
        echo "    ‚Ä¢ T√∂bb 100 csomag telep√ºl (GTK, QT, AwesomeWM, stb.)"
        echo "    ‚Ä¢ Nordic t√©ma ker√ºl telep√≠t√©sre mindenhol"
        echo "    ‚Ä¢ Az alap√©rtelmezett szerkeszt≈ë be√°ll√≠t√°sai m√≥dosulnak"
        echo "    ‚Ä¢ √öj bet≈±t√≠pusok telep√ºlnek"
        echo "    ‚Ä¢ Szintaxis kiemel√©s ker√ºl hozz√°ad√°sra"
        echo "    ‚Ä¢ Alap√©rtelmezett t√©m√°k v√°ltoznak"
        echo "    ‚Ä¢ K√ºl√∂nb√∂z≈ë rendszerbe√°ll√≠t√°sok m√≥dosulnak"
        echo "    ‚Ä¢ LightDM be√°ll√≠t√°sok v√°ltoznak"
        echo "    ‚Ä¢ Fish shell lesz az alap√©rtelmezett (root sz√°m√°ra)"
        echo ""
        echo "üîë JELSZ√ì T√ñBBSZ√ñRI MEGAD√ÅSA SZ√úKS√âGES"
        echo "    ‚Ä¢ T√∂bbsz√∂r is felk√©rj√ºk a sudo jelszava megad√°s√°ra"
        echo "    ‚Ä¢ Ez norm√°lis a rendszerszint≈± telep√≠t√©sek sor√°n"
        echo "    ‚Ä¢ Legyen k√©zn√©l a jelszava!"
        echo ""

        # R√©szletes folyamat megjelen√≠t√©se
        show_detailed_explanation

        echo "-------------------------------------------------------------------"
        echo ""
        echo "üéØ AZ AWESOME WM TELEP√çT√âS√âHEZ:"
        echo ""
        echo "   Futtassa a k√∂vetkez≈ë parancsot a termin√°lban:"
        echo "   ---------------------------------------------"
        echo "   üî• sudo bash awesome-install üî•"
        echo "   ---------------------------------------------"
        echo ""
        echo ""
        echo "‚ùó Ez a termin√°l nyitva marad a parancs v√©grehajt√°s√°hoz."
        echo "‚ùó Nyomjon meg egy billenty≈±t a termin√°l bez√°r√°s√°hoz, ha k√©sz..."
        echo ""
        echo "==================================================================="
    else
        echo "==================================================================="
        echo "                   ‚ö†Ô∏è  SYSTEM CONFIGURATION WARNING ‚ö†Ô∏è"
        echo "==================================================================="
        echo ""
        echo "üö® IMPORTANT: This script will perform CRITICAL system modifications!"
        echo "   Please read ALL of the following information carefully:"
        echo ""
        echo "üî¥ PREREQUISITES & WARNINGS:"
        echo ""
        echo "üì∂  STABLE INTERNET CONNECTION REQUIRED"
        echo "    ‚Ä¢ A reliable internet connection is essential throughout the process"
        echo "    ‚Ä¢ Interruption may cause installation failures"
        echo "    ‚Ä¢ Several hundred MB of data will be downloaded"
        echo ""
        echo "‚è∞  TIME REQUIREMENT: 15 MINUTES TO 60 MINUTES"
        echo "    ‚Ä¢ Process involves compiling packages and system configuration"
        echo "    ‚Ä¢ Duration depends on your system speed and internet connection"
        echo "    ‚Ä¢ Process runs in multiple phases, see detailed description below"
        echo ""
        echo "‚öôÔ∏è  SYSTEM CHANGES WILL BE MADE:"
        echo "    ‚Ä¢ Snapper (BTRFS snapshot) configuration will be set up"
        echo "    ‚Ä¢ BTRFS maintenance timers will be activated"
        echo "    ‚Ä¢ Hundreds of packages will be installed (GTK, QT, AwesomeWM, etc.)"
        echo "    ‚Ä¢ Nordic theme will be installed system-wide"
        echo "    ‚Ä¢ Default editor settings will be modified"
        echo "    ‚Ä¢ New fonts will be installed"
        echo "    ‚Ä¢ Syntax highlighting will be added"
        echo "    ‚Ä¢ Default themes will be changed"
        echo "    ‚Ä¢ Various system configurations will be adjusted"
        echo "    ‚Ä¢ LightDM settings will be changed"
        echo "    ‚Ä¢ Fish shell will be set as default (for root)"
        echo ""
        echo "üîë PASSWORD REQUIRED MULTIPLE TIMES"
        echo "    ‚Ä¢ You will be prompted for your sudo password SEVERAL times"
        echo "    ‚Ä¢ This is normal for system-level installations"
        echo "    ‚Ä¢ Have your password ready!"
        echo ""

        # Detailed process in English
        show_detailed_explanation

        echo "-------------------------------------------------------------------"
        echo ""
        echo "üéØ TO PROCEED WITH AWESOME WM INSTALLATION:"
        echo ""
        echo "   Run this command in the terminal:"
        echo "   ---------------------------------"
        echo "   üî• sudo bash awesome-install üî•"
        echo "   ---------------------------------"
        echo ""
        echo ""
        echo "‚ùó This terminal will remain open for you to execute the command."
        echo "‚ùó Press any key to close this terminal when finished..."
        echo ""
        echo "==================================================================="
    fi
}

# F≈ë program
show_message
read -n 1 -s
